var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){e.prototype.init=function(){this.$setValue(),this._preventDefaultEvent(),this._bindEvent(),this.isInit=!0},e.prototype._preventDefaultEvent=function(t){function e(){window.event.preventDefault()}this.input.addEventListener("copy",e),this.input.addEventListener("cut",e),this.input.addEventListener("dragenter",function(t){return t.preventDefault(),this.warn("_dragenterhandlder"),this.setAttribute("readonly",!0),!1}),this.input.addEventListener("dragleave",function(t){return t.preventDefault(),this.warn("_dragleaveHandler"),this.removeAttribute("readonly"),!1}),this.input.addEventListener("mousedown",function(t){return 0===t.button&&this.selectionStart!=this.selectionEnd&&(this.selectionStart=this.selectionEnd=this.value.length),!1})},e.prototype._bindEvent=function(){var t=this;this.input.addEventListener("compositionstart",function(){t.lock=!0,t.warn("start")}),this.input.addEventListener("compositionend",function(){t.lock=!1,t.warn("end"),t._inputHandler()}),this.input.addEventListener("input",this._inputHandler.bind(this)),this.input.addEventListener("propertychange",this._inputHandler.bind(this))},e.prototype._inputHandler=function(){this.lock||(this.isInit?this.warn("input"):this.warn("init"),"password"===this.type?this._passwordHandler():this._textHandler(),this._showValue(),this._setCursor(),"function"==typeof this.callback&&this.callback())},e.prototype._passwordHandler=function(){var t,e,n=this,i=this._filterCn(this.input.value).split(""),o=this.input.valueProxy.split(""),s=i.length-o.length,r=this.input.selectionStart,u=r-this.input.value.split("").length+i.length;0<s&&(t=i.join("").replace(this.symbolRegExp,"").split(""),e=0<i.length-r?o.slice(-(i.length-r)):[],o=[].concat(o.slice(0,r-t.length),t,e),console.log(t,this.symbolRegExp)),s<0&&o.splice(r,Math.abs(s)),i.forEach(function(t,e){t!=n.symbol&&(o[e]=t)}),this.input.valueProxy=o.join(""),this.cursor=u},e.prototype._filterCn=function(t,e){var n;return t&&(n=this.pattern,t.replace(n,e=e||""))},e.prototype._textHandler=function(){this.input.valueProxy=this._filterCn(this.input.value),this.cursor=this.input.selectionStart-this.input.value.split("").length+this.input.valueProxy.split("").length},e.prototype._showValue=function(){var e=this,n="";"password"===this.type?this.value.split("").forEach(function(t){n+=e.symbol}):n=this.value,this.input.value=n},e.prototype._setCursor=function(){this.input.selectionStart=this.cursor,this.input.selectionEnd=this.cursor},e.prototype.warn=function(t){console.log(t)},e.prototype.$setValue=function(t){t&&(this.input.value=t),this._inputHandler()},e.prototype.$changeType=function(t){this.type=t,this.$setValue(this.value)};var t=e;function e(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.type,n=void 0===n?"password":n,i=e.symbol,i=void 0===i?"*":i,o=e.callback,o=void 0===o?function(){}:o,e=e.pattern,e=void 0===e?/([\u4e00-\u9fa5])/g:e,s=this;if(s.input="string"==typeof t?document.getElementById(0===t.indexOf("#")?t.substr(1):t):t,s.input&&s.input.tagName&&"input"==s.input.tagName.toLowerCase()&&"password"!==s.input.type)return s.input.valueProxy="",s.callback=o,s.type=n,s.symbol=i,s.symbolRegExp=new RegExp(s.symbol.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),s.pattern=e,s.cursor=0,s.isInit=!1,Object.defineProperty(s,"value",{get:function(){return s.input.valueProxy}}),s.init(),s;throw new Error("请传一个type为text的input的id或HTMLInputElement！")}"function"==typeof define&&define.amd?define(function(){return t}):"object"===(void 0===t?"undefined":_typeof(t))&&"object"===("undefined"==typeof module?"undefined":_typeof(module))?(void 0===module.exports.__esModule&&Object.defineProperty(t,"__esModule",{value:!0}),(module.exports=t).default=t):this.NicePassWord=t}();